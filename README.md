# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с TS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Типы данных

    type сategories =
| 'soft-skill'
| 'hard-skill'
| 'additional'
| 'other'
| 'button';

## Интерфейсы

Интерфейс главной страницы IMainPage

    - cards: IProduct[] - каталог  (массив)
    - total: number - количество карточек

Интерфейс карточки товара IProduct

    - id: string - id карточки товара
    - title: string - заголовок карточки 
    - image: string - изображение карточки
    - description: string - описание товара
    - category: categories - категория товара
    - price: number | null; - цена товара 
    - buyProductBtn: string - кнопка "Купить" в карточке

Интерфейс корзины IBasket

    - items: string[] - товары в корзине (массив)
    - total: number | null; - итоговая стоимость (в случае добавления товара/ов из категории "Бесценно" - стоимость будет равна нулю)

Интерфейс заказа IOrder

    - items: string[] - товары в заказе (массив)
    - address: string - адрес
    - email: string - электронный адрес
    - phone: string - телефон
    - paymentMethod: payment - способ оплаты
    - total: number - итоговая сумма заказа

Интерфейс валидации  IValidation

    - errors: string[] - сообщение об ошибках (массив)
    - validation: boolean - валидация формы true or false

Интерфейс заказа IFinalOrder

    - id: string - айди заказа
    - total: price - финальная стоимость

## Слой данных

### Класс AppOperation



## Классы

### Класс Component

Абстрактный класс Component (является базовым компонентом) c методами управления внешним видом и поведением элементов в DOM:

  - toggleClass() - переключить класс элемента
  - hideElement() - скрыть элемент
  - showElement() - показать элемент
  - setText() - установить текст элемента
  - setDisabled() - заблокировать/разблокировать элемент
  - setImage() - установить изображение
  - render() - возвращает HTML элемент 

### Класс Api

Содержит в себе базовую логику отправки запросов. В конструктор передается базовый адрес сервера и опциональный объект с заголовками запросов.\
Методы:

    'get' - выполняет GET запрос на переданный в параметрах ендпоинт и возвращает промис с объектом, которым ответил сервер

    'post' - принимает объект с данными, которые будут переданы в JSON в теле запроса, и отправляет эти данные на ендпоинт переданный как параметр при вызове метода. По умолчанию выполняется POST запрос, но метод запроса может быть переопределен заданием третьего параметра при вызове.

### Класс EventEmitter

Брокер событий позволяет отправлять события и подписываться на события, происходящие в системе. Класс используется в презентере для обработки событий и в слоях приложения для генерации событий.
Основные методы, реализуемые классом описаны интерфейсом IEvents:

    'on' - подписка на событие
    'emit' - инициализация события
    'trigger' - возвращает функцию, при вызове которой инициализируется требуемое в параметрах событие





### Класс AppState для работы с данными.

Поля класса:
items - 
basket - 
userData - 
formErrors - 
preview - 
Конструктор - 
Сеттеры:
items()
user() 
Геттеры:
itemsList()
user()
basketItems()
totalBasketPrice()
countBasket()
formErrorsList()
Методы:
setPreview()
getBasketId()
 getItemById()
addBasket()
deleteBasket()
 clearBasket()
 validateContact()
clearOrder()
addOrderField()
 hasProductInBasket()
 clearOrderData()

### Класс Page

Класс для отрисовки главной страницы

Поля:
hdrBasketCounter
gallery
pageWrapper
 hdrBasket
Конструктором:
Сеттеры:
counter()
catalog()
locked()

### Класс Success


Основные события, возникающие при взаимодействии пользователя с интерфейсом

    - basket:toOrder — событие, которое происходит при нажатии на кнопку «Оформить» в корзине. Как итог, открывается модальное окно с выбором способа оплаты и адреса, куда доставить товар.
    - basket:toContacts — событие, происходящее при клике на кнопку «Оформить». После этого открывается модальное окно, в котором необходимо заполнять поля контактов.
    - orderInput:change — событие, возникающее при вводе данных в форму заказа Order и контактов Contacts. С помощью данного события активируется валидация. + сохраняются значения из инпутов в поля объекта
    - contacts:submit - событие отправки контактной информации при оформлении заказа
    - order:success — событие, вызываемое успешным ответом сервера при оплате товара. Оно открывает модальное окно, информирующее об успешной оплате.
    - input:error — событие, выполняющее проверку формы и возвращающее ошибки формы.
    - modal:open - событие происходящее при нажатии на карточку товара для открытия её предпросмотра.
    - modal:close — событие, происходящее при клике на кнопку закрытия, клике вне модального окна или по клавише Esc. Оно приводит к закрытию модального окна.
    - items:changed — событие, которое происходит при изменении списка товаров и вызывает перерисовку списка товаров на странице.
    - card:select — событие, инициируемое при клике на карточку товара. Получает данные о ней — объект конкретного товара.
    - preview:change — событие, возникающее при передаче моделью новых данных. Оповещает View и приводит к отрисовке содержимого модального окна.
    - basket: add — событие, инициированное при клике на кнопку «В корзину». Приводит к добавлению товара в корзину и перерисовке счётчика корзины на главной.
    - basket:open — событие, запускаемое при клике на значок корзины. Приводит к открытию модального окна с выбранными товарами и итоговой ценой.
    - basket:remove — событие, вызванное кликом на значок корзины внутри самой корзины. Вызывает перерисовку списка товаров и счётчика на главной странице.

    

